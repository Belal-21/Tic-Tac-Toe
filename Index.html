<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Tic Tac Toe (Goty) </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .cell {
            transition: all 0.3s ease;
        }
        .cell:hover:not(.occupied) {
            background-color: rgba(243, 244, 246, 0.5);
            transform: scale(1.05);
        }
        .winning-cell {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% {
                background-color: rgba(134, 239, 172, 0.3);
            }
            50% {
                background-color: rgba(134, 239, 172, 0.7);
            }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-md w-full bg-white rounded-xl shadow-lg overflow-hidden p-6">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Tic Tac Toe</h1>
        <p class="text-center text-gray-600 mb-6">Classic game against the computer</p>
        
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white mr-2">
                    <i class="fas fa-user"></i>
                </div>
                <span class="font-medium">You (X)</span>
            </div>
            <div class="text-gray-500 font-medium" id="status">Your turn</div>
            <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-red-500 flex items-center justify-center text-white mr-2">
                    <i class="fas fa-robot"></i>
                </div>
                <span class="font-medium">AI (O)</span>
            </div>
        </div>
        
        <div class="grid grid-cols-3 gap-3 mb-6" id="board">
            <!-- Cells will be generated by JavaScript -->
        </div>
        
        <div class="flex justify-between items-center">
            <button id="resetBtn" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">
                <i class="fas fa-redo mr-2"></i>Reset Game
            </button>
            <div class="flex space-x-2">
                <button id="easyBtn" class="px-3 py-1 bg-green-100 text-green-700 rounded-lg text-sm">Easy</button>
                <button id="mediumBtn" class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-lg text-sm">Medium</button>
                <button id="hardBtn" class="px-3 py-1 bg-red-100 text-red-700 rounded-lg text-sm">Hard</button>
            </div>
        </div>
    </div>
    
    <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl p-6 max-w-sm w-full mx-4 text-center fade-in">
            <h2 class="text-2xl font-bold mb-4" id="resultText">You Won!</h2>
            <p class="text-gray-600 mb-6" id="resultMessage">Congratulations on your victory!</p>
            <button id="playAgainBtn" class="w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                Play Again
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const board = document.getElementById('board');
            const status = document.getElementById('status');
            const resetBtn = document.getElementById('resetBtn');
            const resultModal = document.getElementById('resultModal');
            const resultText = document.getElementById('resultText');
            const resultMessage = document.getElementById('resultMessage');
            const playAgainBtn = document.getElementById('playAgainBtn');
            const easyBtn = document.getElementById('easyBtn');
            const mediumBtn = document.getElementById('mediumBtn');
            const hardBtn = document.getElementById('hardBtn');
            
            let gameBoard = ['', '', '', '', '', '', '', '', ''];
            let currentPlayer = 'X';
            let gameActive = true;
            let difficulty = 'medium'; // default difficulty
            
            // Initialize the board
            function initializeBoard() {
                board.innerHTML = '';
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell', 'w-full', 'h-24', 'border-2', 'border-gray-200', 
                                     'rounded-lg', 'flex', 'items-center', 'justify-center', 
                                     'text-4xl', 'font-bold', 'cursor-pointer');
                    cell.setAttribute('data-index', i);
                    cell.addEventListener('click', handleCellClick);
                    board.appendChild(cell);
                }
            }
            
            // Handle cell click
            function handleCellClick(e) {
                const clickedCell = e.target;
                const clickedCellIndex = parseInt(clickedCell.getAttribute('data-index'));
                
                if (gameBoard[clickedCellIndex] !== '' || !gameActive || currentPlayer !== 'X') {
                    return;
                }
                
                updateCell(clickedCell, clickedCellIndex);
                checkGameStatus();
                
                // AI move if game is still active
                if (gameActive && currentPlayer === 'O') {
                    setTimeout(() => {
                        makeAIMove();
                        checkGameStatus();
                    }, 500);
                }
            }
            
            // Update cell with current player's mark
            function updateCell(cell, index) {
                gameBoard[index] = currentPlayer;
                cell.textContent = currentPlayer;
                cell.classList.add('occupied');
                
                if (currentPlayer === 'X') {
                    cell.classList.add('text-blue-500');
                } else {
                    cell.classList.add('text-red-500');
                }
            }
            
            // Check game status (win/draw)
            function checkGameStatus() {
                const winningConditions = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
                    [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
                    [0, 4, 8], [2, 4, 6]             // diagonals
                ];
                
                let roundWon = false;
                
                for (let i = 0; i < winningConditions.length; i++) {
                    const [a, b, c] = winningConditions[i];
                    
                    if (gameBoard[a] === '' || gameBoard[b] === '' || gameBoard[c] === '') {
                        continue;
                    }
                    
                    if (gameBoard[a] === gameBoard[b] && gameBoard[b] === gameBoard[c]) {
                        roundWon = true;
                        
                        // Highlight winning cells
                        document.querySelector(`[data-index="${a}"]`).classList.add('winning-cell');
                        document.querySelector(`[data-index="${b}"]`).classList.add('winning-cell');
                        document.querySelector(`[data-index="${c}"]`).classList.add('winning-cell');
                        break;
                    }
                }
                
                if (roundWon) {
                    status.textContent = `Player ${currentPlayer} wins!`;
                    gameActive = false;
                    
                    // Show result modal
                    if (currentPlayer === 'X') {
                        resultText.textContent = 'You Won!';
                        resultMessage.textContent = 'Congratulations on your victory!';
                    } else {
                        resultText.textContent = 'AI Won!';
                        resultMessage.textContent = 'Better luck next time!';
                    }
                    resultModal.classList.remove('hidden');
                    return;
                }
                
                if (!gameBoard.includes('')) {
                    status.textContent = 'Game ended in a draw!';
                    gameActive = false;
                    
                    // Show result modal
                    resultText.textContent = 'Draw!';
                    resultMessage.textContent = 'The game ended in a tie!';
                    resultModal.classList.remove('hidden');
                    return;
                }
                
                // Switch player
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                status.textContent = currentPlayer === 'X' ? 'Your turn' : 'AI is thinking...';
            }
            
            // AI move logic
            function makeAIMove() {
                let move;
                
                switch (difficulty) {
                    case 'easy':
                        move = getRandomMove();
                        break;
                    case 'medium':
                        // 50% chance to make a random move, 50% to make a smart move
                        move = Math.random() < 0.5 ? getRandomMove() : getSmartMove();
                        break;
                    case 'hard':
                        move = getSmartMove();
                        break;
                    default:
                        move = getRandomMove();
                }
                
                const cell = document.querySelector(`[data-index="${move}"]`);
                updateCell(cell, move);
            }
            
            // Get a random available move
            function getRandomMove() {
                const availableMoves = gameBoard
                    .map((cell, index) => cell === '' ? index : null)
                    .filter(val => val !== null);
                
                return availableMoves[Math.floor(Math.random() * availableMoves.length)];
            }
            
            // Get a smart move (tries to win or block)
            function getSmartMove() {
                // Check for winning move
                for (let i = 0; i < 9; i++) {
                    if (gameBoard[i] === '') {
                        gameBoard[i] = 'O';
                        if (checkWin('O')) {
                            gameBoard[i] = '';
                            return i;
                        }
                        gameBoard[i] = '';
                    }
                }
                
                // Check for blocking move
                for (let i = 0; i < 9; i++) {
                    if (gameBoard[i] === '') {
                        gameBoard[i] = 'X';
                        if (checkWin('X')) {
                            gameBoard[i] = '';
                            return i;
                        }
                        gameBoard[i] = '';
                    }
                }
                
                // Try to take center if available
                if (gameBoard[4] === '') return 4;
                
                // Try to take a corner
                const corners = [0, 2, 6, 8];
                const availableCorners = corners.filter(index => gameBoard[index] === '');
                if (availableCorners.length > 0) {
                    return availableCorners[Math.floor(Math.random() * availableCorners.length)];
                }
                
                // Take any available edge
                const edges = [1, 3, 5, 7];
                const availableEdges = edges.filter(index => gameBoard[index] === '');
                if (availableEdges.length > 0) {
                    return availableEdges[Math.floor(Math.random() * availableEdges.length)];
                }
                
                // Fallback to random move
                return getRandomMove();
            }
            
            // Check if a player would win with the current board
            function checkWin(player) {
                const winningConditions = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8], // rows
                    [0, 3, 6], [1, 4, 7], [2, 5, 8], // columns
                    [0, 4, 8], [2, 4, 6]             // diagonals
                ];
                
                return winningConditions.some(condition => {
                    return condition.every(index => {
                        return gameBoard[index] === player;
                    });
                });
            }
            
            // Reset game
            function resetGame() {
                gameBoard = ['', '', '', '', '', '', '', '', ''];
                currentPlayer = 'X';
                gameActive = true;
                status.textContent = 'Your turn';
                initializeBoard();
            }
            
            // Event listeners
            resetBtn.addEventListener('click', resetGame);
            playAgainBtn.addEventListener('click', () => {
                resultModal.classList.add('hidden');
                resetGame();
            });
            
            // Difficulty buttons
            easyBtn.addEventListener('click', () => {
                difficulty = 'easy';
                easyBtn.classList.add('bg-green-200', 'font-bold');
                mediumBtn.classList.remove('bg-yellow-200', 'font-bold');
                hardBtn.classList.remove('bg-red-200', 'font-bold');
                resetGame();
            });
            
            mediumBtn.addEventListener('click', () => {
                difficulty = 'medium';
                easyBtn.classList.remove('bg-green-200', 'font-bold');
                mediumBtn.classList.add('bg-yellow-200', 'font-bold');
                hardBtn.classList.remove('bg-red-200', 'font-bold');
                resetGame();
            });
            
            hardBtn.addEventListener('click', () => {
                difficulty = 'hard';
                easyBtn.classList.remove('bg-green-200', 'font-bold');
                mediumBtn.classList.remove('bg-yellow-200', 'font-bold');
                hardBtn.classList.add('bg-red-200', 'font-bold');
                resetGame();
            });
            
            // Initialize the game
            initializeBoard();
            mediumBtn.classList.add('bg-yellow-200', 'font-bold'); // Set medium as default
        });
    </script>
</body>
</html>